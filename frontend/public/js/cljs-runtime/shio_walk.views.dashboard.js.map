{"version":3,"sources":["shio_walk/views/dashboard.cljs"],"mappings":"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","names":["shio-walk.views.dashboard/format-distance","meters","or__5002__auto__","shio-walk.views.dashboard/safe-parse-int","s","js/parseInt","shio-walk.views.dashboard/safe-parse-float","js/parseFloat","shio-walk.views.dashboard/header","cljs.core/deref","user","re_frame.core.subscribe","re-frame.core/dispatch","shio-walk.views.dashboard/stats-panel","stats","shio-walk.views.dashboard/walk-control","current-walk","loading?","with-let12419","reagent.ratom/with-let-values","temp__5808__auto__","reagent.ratom/*ratom-context*","c__11860__auto__","reagent.debug/has-console","reagent.debug/tracking","reagent.debug/track-console","js/console","init12420","cljs.core/not","res12421","steps","reagent.core.atom","distance","cljs.core/reset!","p1__12417#","p1__12418#","js/console.log","shio-walk.views.dashboard/walks-history","walks","walk-items","iter__5480__auto__","s__12423","cljs.core/LazySeq","temp__5804__auto__","cljs.core/seq","cljs.core/chunked-seq?","c__5478__auto__","size__5479__auto__","cljs.core/count","b__12425","cljs.core/chunk-buffer","i__12424","cljs.core/-nth","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__12422","cljs.core/chunk-rest","cljs.core/first","cljs.core/cons","cljs.core/rest","walk","cljs.core.take","cljs.core._EQ_","cljs.core/empty?","shio-walk.views.dashboard/rewards-panel","rewards","unlocked-rewards","unlocked-ids","cljs.core/set","cljs.core.map","reward-cards","s__12427","b__12429","i__12428","iter__12426","reward","unlocked?","cljs.core/contains?","shio-walk.views.dashboard/dashboard-page","cljs.core/chunk-first"],"sourcesContent":["(ns shio-walk.views.dashboard\n  (:require [re-frame.core :as rf]\n            [reagent.core :as r]))\n\n;; \u30e6\u30fc\u30c6\u30a3\u30ea\u30c6\u30a3\u95a2\u6570\n(defn format-distance [meters]\n  (.toFixed (/ (or meters 0) 1000) 2))\n\n(defn safe-parse-int [s]\n  (or (js/parseInt s) 0))\n\n(defn safe-parse-float [s]\n  (or (js/parseFloat s) 0))\n\n(defn header []\n  (let [user @(rf/subscribe [:user])]\n    [:div.container\n     [:div {:style {:display \"flex\"\n                    :justify-content \"space-between\"\n                    :align-items \"center\"}}\n      [:div\n       [:h1 \"ShioWalk\"]\n       [:p (str \"\u3088\u3046\u3053\u305d\u3001\" (:username user) \"\u3055\u3093\")]]\n      [:button {:on-click #(rf/dispatch [:logout])}\n       \"\u30ed\u30b0\u30a2\u30a6\u30c8\"]]]))\n\n(defn stats-panel []\n  (let [stats @(rf/subscribe [:stats])]\n    [:div.container\n     [:h2 \"\u7d71\u8a08\u60c5\u5831\"]\n     [:div.stats-grid\n      [:div.stat-card\n       [:div.stat-value (or (:total-steps stats) 0)]\n       [:div.stat-label \"\u7d2f\u8a08\u6b69\u6570\"]]\n      [:div.stat-card\n       [:div.stat-value (.toFixed (or (:total-distance-km stats) 0) 2)]\n       [:div.stat-label \"\u7d2f\u8a08\u8ddd\u96e2 (km)\"]]\n      [:div.stat-card\n       [:div.stat-value (or (:total-walks stats) 0)]\n       [:div.stat-label \"\u30a6\u30a9\u30fc\u30af\u56de\u6570\"]]\n      [:div.stat-card\n       [:div.stat-value (or (:rewards-unlocked stats) 0)]\n       [:div.stat-label \"\u7372\u5f97\u5831\u916c\"]]]]))\n\n(defn walk-control []\n  (let [current-walk @(rf/subscribe [:current-walk])\n        loading? @(rf/subscribe [:loading?])]\n    (r/with-let [steps (r/atom \"0\")\n                 distance (r/atom \"0.00\")]\n      ;; current-walk\u304c\u5909\u308f\u3063\u305f\u3089atom\u3092\u66f4\u65b0\n      (when current-walk\n        (reset! steps (str (or (:steps current-walk) 0)))\n        (reset! distance (format-distance (:distance-meters current-walk))))\n      \n      [:div.container\n       [:h2 \"\u30a6\u30a9\u30fc\u30ad\u30f3\u30b0\"]\n       (if current-walk\n         [:div\n          [:p {:style {:color \"#667eea\" :font-weight \"bold\"}}\n           \"\u30a6\u30a9\u30fc\u30ad\u30f3\u30b0\u4e2d...\"]\n          [:div {:style {:margin \"20px 0\"}}\n           [:label {:style {:display \"block\" :margin-bottom \"5px\"}}\n            \"\u6b69\u6570:\"]\n           [:input {:type \"number\"\n                    :value @steps\n                    :on-change #(reset! steps (-> % .-target .-value))\n                    :disabled loading?}]\n           [:label {:style {:display \"block\" :margin-bottom \"5px\" :margin-top \"15px\"}}\n            \"\u8ddd\u96e2 (km):\"]\n           [:input {:type \"number\"\n                    :step \"0.01\"\n                    :value @distance\n                    :on-change #(reset! distance (-> % .-target .-value))\n                    :disabled loading?}]]\n          [:div {:style {:display \"flex\" :gap \"10px\"}}\n           [:button {:on-click #(rf/dispatch [:update-walk \n                                              (:id current-walk)\n                                              {:steps (safe-parse-int @steps)\n                                               :distance (safe-parse-float @distance)}])\n                     :disabled loading?}\n            \"\u66f4\u65b0\"]\n           [:button {:on-click #(rf/dispatch [:complete-walk (:id current-walk)])\n                     :disabled loading?\n                     :style {:background \"linear-gradient(135deg, #11998e 0%, #38ef7d 100%)\"}}\n            \"\u5b8c\u4e86\"]]]\n         [:div\n          [:p \"\u30a6\u30a9\u30fc\u30ad\u30f3\u30b0\u3092\u958b\u59cb\u3057\u307e\u3057\u3087\u3046\uff01\"]\n          [:button {:on-click #(do\n                                 (js/console.log \"\u30dc\u30bf\u30f3\u304c\u30af\u30ea\u30c3\u30af\u3055\u308c\u307e\u3057\u305f\")\n                                 (rf/dispatch [:start-walk]))\n                    :disabled loading?}\n           \"\u30a6\u30a9\u30fc\u30ad\u30f3\u30b0\u958b\u59cb\"]])])))\n\n(defn walks-history []\n  (let [walks @(rf/subscribe [:walks])\n        walk-items (for [walk (take 10 walks)]\n                     ^{:key (:id walk)}\n                     [:div {:style {:background \"#f5f5f5\"\n                                   :padding \"15px\"\n                                   :margin \"10px 0\"\n                                   :border-radius \"8px\"\n                                   :border-left (str \"4px solid \" \n                                                    (if (= (:status walk) \"completed\")\n                                                      \"#38ef7d\"\n                                                      \"#667eea\"))}}\n                      [:div {:style {:display \"flex\"\n                                    :justify-content \"space-between\"\n                                    :align-items \"center\"}}\n                       [:div\n                        [:strong (if (= (:status walk) \"completed\") \"\u2713 \u5b8c\u4e86\" \"\u9032\u884c\u4e2d\")]\n                        [:p {:style {:margin \"5px 0\" :color \"#666\"}}\n                         (str (:steps walk) \"\u6b69 / \" (format-distance (:distance-meters walk)) \"km\")]\n                        [:p {:style {:margin \"0\" :font-size \"0.9em\" :color \"#999\"}}\n                         (:start-time walk)]]\n                       (when (= (:status walk) \"completed\")\n                         [:div {:style {:color \"#38ef7d\" :font-size \"2em\"}}\n                          \"\ud83c\udfc6\"])]])]\n    [:div.container\n     [:h2 \"\u30a6\u30a9\u30fc\u30af\u5c65\u6b74\"]\n     (if (empty? walks)\n       [:p \"\u307e\u3060\u30a6\u30a9\u30fc\u30af\u8a18\u9332\u304c\u3042\u308a\u307e\u305b\u3093\"]\n       [:div walk-items])]))\n\n(defn rewards-panel []\n  (let [rewards @(rf/subscribe [:rewards])\n        unlocked-rewards @(rf/subscribe [:unlocked-rewards])\n        unlocked-ids (set (map :reward-id unlocked-rewards))\n        reward-cards (for [reward rewards]\n                       (let [unlocked? (contains? unlocked-ids (:id reward))]\n                         ^{:key (:id reward)}\n                         [:div {:style {:background (if unlocked? \"#f0f9ff\" \"#f5f5f5\")\n                                       :padding \"20px\"\n                                       :border-radius \"8px\"\n                                       :border (str \"2px solid \" (if unlocked? \"#667eea\" \"#e0e0e0\"))\n                                       :opacity (if unlocked? 1 0.6)}}\n                          [:div {:style {:display \"flex\"\n                                        :justify-content \"space-between\"\n                                        :align-items \"flex-start\"}}\n                           [:div\n                            [:h3 {:style {:margin \"0 0 10px 0\"\n                                         :color (if unlocked? \"#667eea\" \"#666\")}}\n                             (:title reward)]\n                            [:p {:style {:margin \"5px 0\"\n                                        :color \"#666\"\n                                        :font-size \"0.9em\"}}\n                             (if (= (:threshold-type reward) \"steps\")\n                               (str (:threshold-value reward) \"\u6b69\")\n                               (str (/ (:threshold-value reward) 1000) \"km\"))]\n                            [:p {:style {:margin \"5px 0\"\n                                        :font-size \"0.9em\"}}\n                             (:description reward)]]\n                           (when unlocked?\n                             [:div {:style {:color \"#667eea\" :font-size \"2em\"}}\n                              \"\ud83c\udf89\"])]]))]\n    [:div.container\n     [:h2 \"\u5831\u916c\"]\n     (if (empty? rewards)\n       [:p \"\u5831\u916c\u30c7\u30fc\u30bf\u3092\u8aad\u307f\u8fbc\u307f\u4e2d...\"]\n       [:div {:style {:display \"grid\"\n                     :grid-template-columns \"repeat(auto-fill, minmax(250px, 1fr))\"\n                     :gap \"20px\"}}\n        reward-cards])]))\n\n(defn dashboard-page []\n  [:div\n   [header]\n   [stats-panel]\n   [walk-control]\n   [walks-history]\n   [rewards-panel]])\n"]}