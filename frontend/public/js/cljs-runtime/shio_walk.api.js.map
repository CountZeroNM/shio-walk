{"version":3,"sources":["shio_walk/api.cljs"],"mappings":";AAGA,6BAAA,7BAAKA;AAEL,4BAAA,5BAAMC,gEAAaC;AAAnB,AACE,oBAAMA;AAAN,AAAA,0FAAA,wEACkB,CAAA,sDAAeA;;AADjC;;;AAGF,yBAAA,zBAAMC,0DAAUC,KAAKC,WAAWC;AAAhC,AACE,oKAAA,2CAAA,6DAAA,0DAAA,qDAAA,2EAAA,qDAAA,8DAAA,KAAA,sEAAA,7nBAACC,oDAAU,4BAAA,3BAAKP,2MACII,kXAICC,kFACMC;;AAE7B,sBAAA,tBAAME,oDAAOC,YAAYJ,WAAWC;AAApC,AACE,iKAAA,2CAAA,oEAAA,0DAAA,qDAAA,2EAAA,qDAAA,8DAAA,KAAA,sEAAA,joBAACC,oDAAU,4BAAA,3BAAKP,wMACIS,yXAICJ,kFACMC;;AAE7B,4BAAA,5BAAMI,gEAAaR,MAAMG,WAAWC;AAApC,AACE,kKAAA,2CAAA,4FAAA,2EAAA,qDAAA,8DAAA,KAAA,sEAAA,3iBAACK,mDAAS,4BAAA,3BAAKX,6MACK,AAACC,0BAAYC,qQAGbG,kFACMC;;AAE5B,0BAAA,1BAAMM,4DAAWV,MAAMG,WAAWC;AAAlC,AACE,2JAAA,2CAAA,4FAAA,2EAAA,qDAAA,8DAAA,KAAA,sEAAA,piBAACK,mDAAS,4BAAA,3BAAKX,sMACK,AAACC,0BAAYC,qQAGbG,kFACMC;;AAE5B,2BAAA,3BAAMO,8DAAYX,MAAMG,WAAWC;AAAnC,AACE,kKAAA,2CAAA,4FAAA,2EAAA,qDAAA,8DAAA,KAAA,reAACC,oDAAU,4BAAA,3BAAKP,4MACK,AAACC,0BAAYC,qQAIb,WAAKY;AAAL,AACN,YAAA,ZAACC,6CAAgDD;;AACjD,YAAA,ZAACC,sBAAyB,AAACC,wGAAOF;;AAClC,QAACT,2CAAAA,iDAAAA,RAAWS,6BAAAA;GAR3B,uEAY2BR;;AAE7B,4BAAA,5BAAMW,gEAAaf,MAAMgB,QAAQC,KAAKd,WAAWC;AAAjD,AACE,iNAAA,2CAAA,4FAAA,6DAAA,0DAAA,qDAAA,2EAAA,qDAAA,8DAAA,KAAA,sEAAA,twBAACc,mDAAS,4BAAA,3BAAKpB,iFAAuBkB,2KAClB,AAACjB,0BAAYC,+DACdiB,kXAICd,kFACMC;;AAE5B,8BAAA,9BAAMe,oEAAenB,MAAMgB,QAAQb,WAAWC;AAA9C,AACE,8NAAA,2CAAA,4FAAA,2EAAA,qDAAA,8DAAA,KAAA,sEAAA,vmBAACC,oDAAU,4BAAA,+DAAA,1FAAKP,iFAAuBkB,uLAClB,AAACjB,0BAAYC,qQAGbG,kFACMC;;AAE7B,0BAAA,1BAAMgB,4DAAWpB,MAAMG,WAAWC;AAAlC,AACE,2JAAA,2CAAA,4FAAA,2EAAA,qDAAA,8DAAA,KAAA,sEAAA,piBAACK,mDAAS,4BAAA,3BAAKX,sMACK,AAACC,0BAAYC,qQAGbG,kFACMC;;AAE5B,4BAAA,5BAAMiB,gEAAarB,MAAMG,WAAWC;AAApC,AACE,6JAAA,2CAAA,4FAAA,2EAAA,qDAAA,8DAAA,KAAA,sEAAA,tiBAACK,mDAAS,4BAAA,3BAAKX,wMACK,AAACC,0BAAYC,qQAGbG,kFACMC;;AAE5B,qCAAA,rCAAMkB,kFAAsBtB,MAAMG,WAAWC;AAA7C,AACE,sKAAA,2CAAA,4FAAA,2EAAA,qDAAA,8DAAA,KAAA,sEAAA,/iBAACK,mDAAS,4BAAA,3BAAKX,iNACK,AAACC,0BAAYC,qQAGbG,kFACMC","names":["shio-walk.api/api-base-url","shio-walk.api/auth-header","token","shio-walk.api/register","user","success-fn","error-fn","ajax.core.POST","shio-walk.api/login","credentials","shio-walk.api/get-profile","ajax.core.GET","shio-walk.api/get-stats","shio-walk.api/start-walk","resp","js/console.log","cljs.core.pr_str","shio-walk.api/update-walk","walk-id","data","ajax.core.PUT","shio-walk.api/complete-walk","shio-walk.api/get-walks","shio-walk.api/get-rewards","shio-walk.api/get-unlocked-rewards"],"sourcesContent":["(ns shio-walk.api\n  (:require [ajax.core :as ajax]))\n\n(def api-base-url \"http://localhost:3000/api\")\n\n(defn auth-header [token]\n  (when token\n    [:Authorization (str \"Bearer \" token)]))\n\n(defn register [user success-fn error-fn]\n  (ajax/POST (str api-base-url \"/auth/register\")\n             {:params user\n              :format :json\n              :response-format :json\n              :keywords? true\n              :handler success-fn\n              :error-handler error-fn}))\n\n(defn login [credentials success-fn error-fn]\n  (ajax/POST (str api-base-url \"/auth/login\")\n             {:params credentials\n              :format :json\n              :response-format :json\n              :keywords? true\n              :handler success-fn\n              :error-handler error-fn}))\n\n(defn get-profile [token success-fn error-fn]\n  (ajax/GET (str api-base-url \"/user/profile\")\n            {:headers (auth-header token)\n             :response-format :json\n             :keywords? true\n             :handler success-fn\n             :error-handler error-fn}))\n\n(defn get-stats [token success-fn error-fn]\n  (ajax/GET (str api-base-url \"/stats\")\n            {:headers (auth-header token)\n             :response-format :json\n             :keywords? true\n             :handler success-fn\n             :error-handler error-fn}))\n\n(defn start-walk [token success-fn error-fn]\n  (ajax/POST (str api-base-url \"/walks/start\")\n             {:headers (auth-header token)\n              :response-format :json\n              :keywords? true\n              ;:handler success-fn\n              :handler (fn [resp]\n                 (js/console.log \"API start-walk response (raw):\" resp)\n                 (js/console.log \"as clj:\" (pr-str resp))\n                 (success-fn resp))\n;:handler (fn [resp]\n;                          (js/console.log \"API start-walk response:\" resp)\n;                          (success-fn resp))\n              :error-handler error-fn}))\n\n(defn update-walk [token walk-id data success-fn error-fn]\n  (ajax/PUT (str api-base-url \"/walks/\" walk-id)\n            {:headers (auth-header token)\n             :params data\n             :format :json\n             :response-format :json\n             :keywords? true\n             :handler success-fn\n             :error-handler error-fn}))\n\n(defn complete-walk [token walk-id success-fn error-fn]\n  (ajax/POST (str api-base-url \"/walks/\" walk-id \"/complete\")\n             {:headers (auth-header token)\n              :response-format :json\n              :keywords? true\n              :handler success-fn\n              :error-handler error-fn}))\n\n(defn get-walks [token success-fn error-fn]\n  (ajax/GET (str api-base-url \"/walks\")\n            {:headers (auth-header token)\n             :response-format :json\n             :keywords? true\n             :handler success-fn\n             :error-handler error-fn}))\n\n(defn get-rewards [token success-fn error-fn]\n  (ajax/GET (str api-base-url \"/rewards\")\n            {:headers (auth-header token)\n             :response-format :json\n             :keywords? true\n             :handler success-fn\n             :error-handler error-fn}))\n\n(defn get-unlocked-rewards [token success-fn error-fn]\n  (ajax/GET (str api-base-url \"/rewards/unlocked\")\n            {:headers (auth-header token)\n             :response-format :json\n             :keywords? true\n             :handler success-fn\n             :error-handler error-fn}))\n"]}